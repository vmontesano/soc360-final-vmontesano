---
title: "New thing"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r json}
library(jsonlite)
library(tidyverse)
library(ggplot2)
```


```{r data, echo=FALSE}
data1 <- read_json("../../Desktop/SOC360/Final/cia_world_factbook_api/data/factbook.json")
```


```{r, 'extraction'}
populationtotals <- c()

for (i in c('bangladesh', 'india', 'philippines')){
  x <- data1$countries[[i]]$data$people$population$total
  populationtotals <- append(populationtotals,x)}

realgrowth <- c()

for (i in c('bangladesh', 'india', 'philippines')){
  x <- data1$countries[[i]]$data$economy$gdp$real_growth_rate$annual_values[[1]][1]
  realgrowth <- append(realgrowth,x)}

ppc <- c()

for (i in c('bangladesh', 'india', 'philippines')){
  x <- data1$countries[[i]]$data$economy$gdp$per_capita_purchasing_power_parity$annual_values[[1]][1]
  ppc <- append(ppc,x)}


#print(populationtotals)
#print(realgrowth)
print(ppc)
     


```

```{r, 'time'}

t <- Sys.time()
`attr<-`(t,"tzone","GMT")
`attr<-`(t,"tzone","EST")


```


```{r, 'table'}
df <- as.data.frame(c('Bangladesh', 'India', 'Philipines')) %>% add_column(populationtotals) %>% add_column(realgrowth %>% as.numeric()) %>% add_column(ppc %>% as.numeric())

colnames(df) <- c('Country', 'Population', 'RealGrowthRate', 'PPPperCapita')
```

```{r, 'bar graph'}

ggplot(df, aes(x = Country, y = Population)) + geom_col()

ggplot(df, aes(x = Country, y = RealGrowthRate)) + geom_col()

ggplot(df, aes(x = Country, y = PPPperCapita)) + geom_col()

```
```{r}

write_csv(df, "final_data.csv")

```

